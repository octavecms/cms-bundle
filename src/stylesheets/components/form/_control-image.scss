/**
 * Image input control
 */

.form-control-image {
    position: relative;
    display: flex;

    border: 1px solid var(--color-outline);
    border-radius: $border-radius;

    &__preview {
        position: relative;
        $size: calc(var(--spacer) * 8 - 2px); // 2px for border
        width: $size;
        height: $size;
        flex: 0 0 $size;
        border-radius: $border-radius 0 0 $border-radius;

        display: flex;
        justify-content: center;
        align-items: center;
        padding: calc(var(--spacer) - 1px); // 1px for border

        // Hover background
        &:before {
            content: "";
            background: var(--color-background);
            border-radius: $border-radius 0 0 $border-radius;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;

            @extend %transition;
            transition-property: opacity;
        }

        &__icon {
            position: absolute;
            z-index: 2;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            pointer-events: none;

            @extend %transition;
            transition-property: opacity;
        }

        &__image {
            position: relative;
            z-index: 2;
            border-radius: 2px;
            display: block;
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
        }

        @include link-hover () {
            &:before,
            .form-control-image__preview__icon {
                opacity: 1;
            }
        }
        @include link-focus-visible () {
            &:before,
            .form-control-image__preview__icon {
                opacity: 1;
            }
        }
    }

    &__content {
        border-left: 1px solid var(--color-outline);
        display: flex;
        align-items: flex-start;
        flex-direction: column;
        flex-grow: 1;
        padding: var(--spacer);
        
        &__title {
            color: var(--color-heading);
            padding: 2px 0 0;
        }
        &__link {
            @extend %link--style-primary;
            @extend %text--size-small;
            font-weight: $text-heading-weight;
        }
        &__spacer {
            flex-grow: 1;
        }
        &__meta {
            @extend %text--size-small;
            color: var(--color-small);
            padding: 0 0 3px;
        }
        &__action {
            position: absolute;
            right: var(--spacer);
            bottom: var(--spacer);
        }
    }
}