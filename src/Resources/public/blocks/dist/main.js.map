{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/main.js"],"names":[],"mappings":"AAAA;;;;;;;ACAA,IAAM,IAAI,MAAV;;AAEA,IAAM,uBAA2B,6BAAjC;AACA,IAAM,qBAA2B,4BAAjC;;AAEA,IAAM,2BAA2B,uCAAjC;;IAGM,U;AACF,wBAAa,UAAb,EAAyB;AAAA;;AACrB,aAAK,UAAL,GAAkB,UAAlB;AACA,aAAK,KAAL,GAAa,WAAW,IAAX,CAAgB,wBAAhB,EAA0C,MAAvD;;AAEA,mBACK,QADL,CACc,aADd,EAEK,QAFL,CAEc;AACN,yBAAsB,gBADhB;AAEN,oBAAsB,aAFhB;AAGN,kCAAsB,IAHhB;AAIN,oBAAsB,MAJhB;AAKN,kBAAsB,GALhB;AAMN,oBAAsB,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CANhB;AAON,oBAAsB,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B;AAPhB,SAFd;;AAYI,mBAAW,EAAX,CAAc,OAAd,EAAuB,8BAAvB,EAAuD,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAvD;AACP;;;;qCAEa;AACV,iBAAK,UAAL,CAAgB,QAAhB,CAAyB,SAAzB;AACA,iBAAK,gBAAL;AACH;;;2CAEmB;AAChB,gBAAI,UAAU,KAAK,UAAL,CAAgB,IAAhB,CAAqB,wBAArB,CAAd;AACA,oBAAQ,IAAR,CAAa,UAAU,KAAV,EAAiB,KAAjB,EAAwB;AACjC,kBAAE,KAAF,EAAS,GAAT,CAAa,KAAb;AACH,aAFD;AAGH;;;0CAEkB,I,EAAM;AACrB,gBAAI,QAAQ,KAAK,KAAL,EAAZ;AACA,mBAAO,KAAK,OAAL,CAAa,WAAb,EAA0B,KAA1B,CAAP;AACH;;;uCAEe,K,EAAO,E,EAAI;AACvB,gBAAI,OAAS,GAAG,IAAH,CAAQ,IAAR,CAAa,WAAb,CAAb;;AAEA,gBAAI,GAAG,IAAH,CAAQ,EAAR,CAAW,kBAAX,KAAkC,IAAtC,EAA4C;AACxC,mBAAG,IAAH,CAAQ,WAAR,CAAoB,KAAK,iBAAL,CAAuB,IAAvB,CAApB;AACA,qBAAK,UAAL;AACH;AACJ;;;0CAEkB,K,EAAO;AACtB,gBAAI,QAAQ,EAAE,MAAM,MAAR,EAAgB,OAAhB,CAAwB,KAAK,UAAL,CAAgB,QAAhB,EAAxB,CAAZ;;AAEA,gBAAI,MAAM,MAAV,EAAkB;AACd,sBAAM,OAAN,CAAc,MAAd,EAAuB,YAAY;AAC/B,0BAAM,MAAN;AACA,yBAAK,UAAL;AACH,iBAHqB,CAGnB,IAHmB,CAGd,IAHc,CAAtB;AAIH;AACJ;;;;;;AAML,EAAE,YAAY;AACV;AACA,MAAE,oBAAF,EACK,IADL,CACU,YAAY;AACd,YAAI,UAAJ,CAAe,EAAE,IAAF,CAAf;AACH,KAHL;;AAKA;AACA,MAAE,kBAAF,EACK,QADL,CACc,YADd,EAEK,SAFL,CAEe;AACP,2BAAoB,EAAE,oBAAF,CADb;AAEP,gBAAoB,OAFb;AAGP,qBAAoB,gBAHb;AAIP,gBAAoB;AAJb,KAFf;AAQH,CAhBD","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const $ = jQuery;\n\nconst BLOCKS_LIST_SELECTOR     = '[data-widget=\"blocks-list\"]';\nconst ADD_BLOCK_SELECTOR       = '[data-widget=\"blocks-add\"]';\n\nconst ORDER_INPUT_CSS_SELECTOR = 'input[type=\"hidden\"][name*=\"[order]\"]';\n\n\nclass BlocksList {\n    constructor ($container) {\n        this.$container = $container;\n        this.index = $container.find(ORDER_INPUT_CSS_SELECTOR).length;\n\n        $container\n            .addClass('blocks-list')\n            .sortable({\n                placeholder         : 'sort-highlight',\n                handle              : '.box-header',\n                forcePlaceholderSize: true,\n                zIndex              : 999999,\n                axis                : 'y',\n                update              : this.handleBlockAdd.bind(this),\n                change              : this.updateBlockOrder.bind(this)\n            });\n\n            $container.on('click', '[data-widget=\"block-remove\"]', this.handleBlockRemove.bind(this));\n    }\n\n    updateList () {\n        this.$container.sortable('refresh');\n        this.updateBlockOrder();\n    }\n\n    updateBlockOrder () {\n        var $inputs = this.$container.find(ORDER_INPUT_CSS_SELECTOR);\n        $inputs.each(function (index, input) {\n            $(input).val(index);\n        });\n    }\n\n    generateBlockHTML (html) {\n        var index = this.index++;\n        return html.replace(/__name__/g, index);\n    }\n\n    handleBlockAdd (event, ui) {\n        var html   = ui.item.data('prototype');\n\n        if (ui.item.is(ADD_BLOCK_SELECTOR) && html) {\n            ui.item.replaceWith(this.generateBlockHTML(html));\n            this.updateList();\n        }\n    }\n\n    handleBlockRemove (event) {\n        var $item = $(event.target).closest(this.$container.children());\n\n        if ($item.length) {\n            $item.slideUp('fast', (function () {\n                $item.remove();\n                this.updateList();\n            }).bind(this));\n        }\n    }\n\n}\n\n\n\n$(function () {\n    // Make blocks sortable Using jquery UI\n    $(BLOCKS_LIST_SELECTOR)\n        .each(function () {\n            new BlocksList($(this));\n        });\n\n    //\n    $(ADD_BLOCK_SELECTOR)\n        .addClass('blocks-add')\n        .draggable({\n            connectToSortable : $(BLOCKS_LIST_SELECTOR),\n            helper            : 'clone',\n            placeholder       : 'sort-highlight',\n            zIndex            : 999999\n        });\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUEsSUFBTSxJQUFJLE1BQVY7O0FBRUEsSUFBTSx1QkFBMkIsNkJBQWpDO0FBQ0EsSUFBTSxxQkFBMkIsNEJBQWpDOztBQUVBLElBQU0sMkJBQTJCLHVDQUFqQzs7SUFHTSxVO0FBQ0Ysd0JBQWEsVUFBYixFQUF5QjtBQUFBOztBQUNyQixhQUFLLFVBQUwsR0FBa0IsVUFBbEI7QUFDQSxhQUFLLEtBQUwsR0FBYSxXQUFXLElBQVgsQ0FBZ0Isd0JBQWhCLEVBQTBDLE1BQXZEOztBQUVBLG1CQUNLLFFBREwsQ0FDYyxhQURkLEVBRUssUUFGTCxDQUVjO0FBQ04seUJBQXNCLGdCQURoQjtBQUVOLG9CQUFzQixhQUZoQjtBQUdOLGtDQUFzQixJQUhoQjtBQUlOLG9CQUFzQixNQUpoQjtBQUtOLGtCQUFzQixHQUxoQjtBQU1OLG9CQUFzQixLQUFLLGNBQUwsQ0FBb0IsSUFBcEIsQ0FBeUIsSUFBekIsQ0FOaEI7QUFPTixvQkFBc0IsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixJQUEzQjtBQVBoQixTQUZkOztBQVlJLG1CQUFXLEVBQVgsQ0FBYyxPQUFkLEVBQXVCLDhCQUF2QixFQUF1RCxLQUFLLGlCQUFMLENBQXVCLElBQXZCLENBQTRCLElBQTVCLENBQXZEO0FBQ1A7Ozs7cUNBRWE7QUFDVixpQkFBSyxVQUFMLENBQWdCLFFBQWhCLENBQXlCLFNBQXpCO0FBQ0EsaUJBQUssZ0JBQUw7QUFDSDs7OzJDQUVtQjtBQUNoQixnQkFBSSxVQUFVLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQix3QkFBckIsQ0FBZDtBQUNBLG9CQUFRLElBQVIsQ0FBYSxVQUFVLEtBQVYsRUFBaUIsS0FBakIsRUFBd0I7QUFDakMsa0JBQUUsS0FBRixFQUFTLEdBQVQsQ0FBYSxLQUFiO0FBQ0gsYUFGRDtBQUdIOzs7MENBRWtCLEksRUFBTTtBQUNyQixnQkFBSSxRQUFRLEtBQUssS0FBTCxFQUFaO0FBQ0EsbUJBQU8sS0FBSyxPQUFMLENBQWEsV0FBYixFQUEwQixLQUExQixDQUFQO0FBQ0g7Ozt1Q0FFZSxLLEVBQU8sRSxFQUFJO0FBQ3ZCLGdCQUFJLE9BQVMsR0FBRyxJQUFILENBQVEsSUFBUixDQUFhLFdBQWIsQ0FBYjs7QUFFQSxnQkFBSSxHQUFHLElBQUgsQ0FBUSxFQUFSLENBQVcsa0JBQVgsS0FBa0MsSUFBdEMsRUFBNEM7QUFDeEMsbUJBQUcsSUFBSCxDQUFRLFdBQVIsQ0FBb0IsS0FBSyxpQkFBTCxDQUF1QixJQUF2QixDQUFwQjtBQUNBLHFCQUFLLFVBQUw7QUFDSDtBQUNKOzs7MENBRWtCLEssRUFBTztBQUN0QixnQkFBSSxRQUFRLEVBQUUsTUFBTSxNQUFSLEVBQWdCLE9BQWhCLENBQXdCLEtBQUssVUFBTCxDQUFnQixRQUFoQixFQUF4QixDQUFaOztBQUVBLGdCQUFJLE1BQU0sTUFBVixFQUFrQjtBQUNkLHNCQUFNLE9BQU4sQ0FBYyxNQUFkLEVBQXVCLFlBQVk7QUFDL0IsMEJBQU0sTUFBTjtBQUNBLHlCQUFLLFVBQUw7QUFDSCxpQkFIcUIsQ0FHbkIsSUFIbUIsQ0FHZCxJQUhjLENBQXRCO0FBSUg7QUFDSjs7Ozs7O0FBTUwsRUFBRSxZQUFZO0FBQ1Y7QUFDQSxNQUFFLG9CQUFGLEVBQ0ssSUFETCxDQUNVLFlBQVk7QUFDZCxZQUFJLFVBQUosQ0FBZSxFQUFFLElBQUYsQ0FBZjtBQUNILEtBSEw7O0FBS0E7QUFDQSxNQUFFLGtCQUFGLEVBQ0ssUUFETCxDQUNjLFlBRGQsRUFFSyxTQUZMLENBRWU7QUFDUCwyQkFBb0IsRUFBRSxvQkFBRixDQURiO0FBRVAsZ0JBQW9CLE9BRmI7QUFHUCxxQkFBb0IsZ0JBSGI7QUFJUCxnQkFBb0I7QUFKYixLQUZmO0FBUUgsQ0FoQkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc3QgJCA9IGpRdWVyeTtcblxuY29uc3QgQkxPQ0tTX0xJU1RfU0VMRUNUT1IgICAgID0gJ1tkYXRhLXdpZGdldD1cImJsb2Nrcy1saXN0XCJdJztcbmNvbnN0IEFERF9CTE9DS19TRUxFQ1RPUiAgICAgICA9ICdbZGF0YS13aWRnZXQ9XCJibG9ja3MtYWRkXCJdJztcblxuY29uc3QgT1JERVJfSU5QVVRfQ1NTX1NFTEVDVE9SID0gJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZSo9XCJbb3JkZXJdXCJdJztcblxuXG5jbGFzcyBCbG9ja3NMaXN0IHtcbiAgICBjb25zdHJ1Y3RvciAoJGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLiRjb250YWluZXIgPSAkY29udGFpbmVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gJGNvbnRhaW5lci5maW5kKE9SREVSX0lOUFVUX0NTU19TRUxFQ1RPUikubGVuZ3RoO1xuXG4gICAgICAgICRjb250YWluZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnYmxvY2tzLWxpc3QnKVxuICAgICAgICAgICAgLnNvcnRhYmxlKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciAgICAgICAgIDogJ3NvcnQtaGlnaGxpZ2h0JyxcbiAgICAgICAgICAgICAgICBoYW5kbGUgICAgICAgICAgICAgIDogJy5ib3gtaGVhZGVyJyxcbiAgICAgICAgICAgICAgICBmb3JjZVBsYWNlaG9sZGVyU2l6ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB6SW5kZXggICAgICAgICAgICAgIDogOTk5OTk5LFxuICAgICAgICAgICAgICAgIGF4aXMgICAgICAgICAgICAgICAgOiAneScsXG4gICAgICAgICAgICAgICAgdXBkYXRlICAgICAgICAgICAgICA6IHRoaXMuaGFuZGxlQmxvY2tBZGQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjaGFuZ2UgICAgICAgICAgICAgIDogdGhpcy51cGRhdGVCbG9ja09yZGVyLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkY29udGFpbmVyLm9uKCdjbGljaycsICdbZGF0YS13aWRnZXQ9XCJibG9jay1yZW1vdmVcIl0nLCB0aGlzLmhhbmRsZUJsb2NrUmVtb3ZlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHVwZGF0ZUxpc3QgKCkge1xuICAgICAgICB0aGlzLiRjb250YWluZXIuc29ydGFibGUoJ3JlZnJlc2gnKTtcbiAgICAgICAgdGhpcy51cGRhdGVCbG9ja09yZGVyKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlQmxvY2tPcmRlciAoKSB7XG4gICAgICAgIHZhciAkaW5wdXRzID0gdGhpcy4kY29udGFpbmVyLmZpbmQoT1JERVJfSU5QVVRfQ1NTX1NFTEVDVE9SKTtcbiAgICAgICAgJGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaW5wdXQpIHtcbiAgICAgICAgICAgICQoaW5wdXQpLnZhbChpbmRleCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQmxvY2tIVE1MIChodG1sKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvX19uYW1lX18vZywgaW5kZXgpO1xuICAgIH1cblxuICAgIGhhbmRsZUJsb2NrQWRkIChldmVudCwgdWkpIHtcbiAgICAgICAgdmFyIGh0bWwgICA9IHVpLml0ZW0uZGF0YSgncHJvdG90eXBlJyk7XG5cbiAgICAgICAgaWYgKHVpLml0ZW0uaXMoQUREX0JMT0NLX1NFTEVDVE9SKSAmJiBodG1sKSB7XG4gICAgICAgICAgICB1aS5pdGVtLnJlcGxhY2VXaXRoKHRoaXMuZ2VuZXJhdGVCbG9ja0hUTUwoaHRtbCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVCbG9ja1JlbW92ZSAoZXZlbnQpIHtcbiAgICAgICAgdmFyICRpdGVtID0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QodGhpcy4kY29udGFpbmVyLmNoaWxkcmVuKCkpO1xuXG4gICAgICAgIGlmICgkaXRlbS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRpdGVtLnNsaWRlVXAoJ2Zhc3QnLCAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRpdGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdCgpO1xuICAgICAgICAgICAgfSkuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIC8vIE1ha2UgYmxvY2tzIHNvcnRhYmxlIFVzaW5nIGpxdWVyeSBVSVxuICAgICQoQkxPQ0tTX0xJU1RfU0VMRUNUT1IpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG5ldyBCbG9ja3NMaXN0KCQodGhpcykpO1xuICAgICAgICB9KTtcblxuICAgIC8vXG4gICAgJChBRERfQkxPQ0tfU0VMRUNUT1IpXG4gICAgICAgIC5hZGRDbGFzcygnYmxvY2tzLWFkZCcpXG4gICAgICAgIC5kcmFnZ2FibGUoe1xuICAgICAgICAgICAgY29ubmVjdFRvU29ydGFibGUgOiAkKEJMT0NLU19MSVNUX1NFTEVDVE9SKSxcbiAgICAgICAgICAgIGhlbHBlciAgICAgICAgICAgIDogJ2Nsb25lJyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyICAgICAgIDogJ3NvcnQtaGlnaGxpZ2h0JyxcbiAgICAgICAgICAgIHpJbmRleCAgICAgICAgICAgIDogOTk5OTk5XG4gICAgICAgIH0pO1xufSk7Il19"}